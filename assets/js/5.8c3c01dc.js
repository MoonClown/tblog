(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{209:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"django框架搭建一个应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#django框架搭建一个应用"}},[t._v("#")]),t._v(" Django框架搭建一个应用")]),t._v(" "),a("h3",{attrs:{id:"_0-基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0-基本使用"}},[t._v("#")]),t._v(" 0. 基本使用")]),t._v(" "),a("ul",[a("li",[t._v("下载\n"),a("ul",[a("li",[t._v("命令行")])])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" pip install django==1.11.25 -i https://pypi.tuna.tsinghua.edu.cn/simple/\n")])])]),a("ul",[a("li",[a("p",[t._v("创建项目")]),t._v(" "),a("ul",[a("li",[t._v("命令行")])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v(" django"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("admin startproject 项目名称\n")])])]),a("ul",[a("li",[a("p",[t._v("pycharm创建")]),t._v(" "),a("p",[t._v("file _>   new project   _>  django  _>  输入项目的目录 _> 选择解释器  _> create")])])])]),t._v(" "),a("li",[a("p",[t._v("启动项目")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("命令行")]),t._v(" "),a("p",[t._v("切换到项目的根目录下")]),t._v(" "),a("p",[t._v("python manage.py runserver   #  127.0.0.1:8000")]),t._v(" "),a("p",[t._v("python manage.py runserver 80   #  127.0.0.1:80")]),t._v(" "),a("p",[t._v("python manage.py runserver 0.0.0.0:80   #  0.0.0.0:80")])]),t._v(" "),a("li",[a("p",[t._v("pycharm")]),t._v(" "),a("p",[t._v("选择django项目  点绿三角  (切记 没有右键启动项目)")])])])])]),t._v(" "),a("h4",{attrs:{id:"创建项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建项目"}},[t._v("#")]),t._v(" 创建项目")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 进入项目目录，启动项目\npython manage.py runsever       #127.0.0.1：8000\n")])])]),a("h4",{attrs:{id:"基本配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本配置"}},[t._v("#")]),t._v(" 基本配置")]),t._v(" "),a("ol",[a("li",[t._v("BASE_DIR 根目录")]),t._v(" "),a("li",[t._v("INSTALLED_APPS 注册的 APP")]),t._v(" "),a("li",[t._v("TEMPLATES 模板文件")])]),t._v(" "),a("p",[t._v("​\tTEMPLATES  模板的配置")]),t._v(" "),a("p",[t._v("​\t\tDIRS [ os.path.join(BASE_DIR, 'templates') ]")]),t._v(" "),a("p",[t._v("​\tDATABASES  数据库")]),t._v(" "),a("p",[t._v("​\tSTATIC_URL = '/static/'  # 静态文件的别名")]),t._v(" "),a("h4",{attrs:{id:"路由配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由配置"}},[t._v("#")]),t._v(" 路由配置")]),t._v(" "),a("p",[t._v("​\turl和函数的对应关系")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" urlpatterns = [\n     url(r'^admin/', admin.site.urls),\n     url(r'^index/', index),\n ]\n from django.shortcuts import HttpResponse, render\n \n \n def index(request):  # request请求对象 必须有\n     # 业务逻辑\n     # return HttpResponse('<h1>ok</h1>')   # 返回字符串\n     return render(request, 'index.html')   # 返回模板  (模板写在templates文件夹中)\n")])])]),a("h4",{attrs:{id:"函数（views）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数（views）"}},[t._v("#")]),t._v(" 函数（views）")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("from django.shortcuts import HttpResponse, render\n\n\ndef index(request):  # request请求对象 必须有\n    # 业务逻辑\n    # return HttpResponse('<h1>ok</h1>')   # 返回字符串\n    return render(request, 'index.html')   # 返回模板  (模板写在templates文件夹中)\n")])])]),a("h3",{attrs:{id:"app使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app使用"}},[t._v("#")]),t._v(" APP使用")]),t._v(" "),a("h5",{attrs:{id:"创建-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-app"}},[t._v("#")]),t._v(" 创建 APP")]),t._v(" "),a("blockquote",[a("p",[t._v("app 是区分项目内的功能")])]),t._v(" "),a("p",[t._v("新建 APP")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("python manage.py startapp app_name\n")])])]),a("p",[t._v("注册 app")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("app_name.apps.App_nameConfig\n")])])]),a("h4",{attrs:{id:"新建页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建页面"}},[t._v("#")]),t._v(" 新建页面")]),t._v(" "),a("blockquote",[a("p",[t._v("绑定页面到url 上")]),t._v(" "),a("p",[t._v("注释掉中间件，提交 POST 请求")])]),t._v(" "),a("h3",{attrs:{id:"使用-orm（数据库）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-orm（数据库）"}},[t._v("#")]),t._v(" 使用 ORM（数据库）")]),t._v(" "),a("ol",[a("li",[t._v("创建数据库")])]),t._v(" "),a("div",{staticClass:"language-mysql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("creat database 数据库名称\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[t._v("在 settings 中配置")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("DATABASES "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ENGINE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'django.db.backends.mysql'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 连接什么样的数据库")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NAME'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bookmanager'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据库的名称")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HOST'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# IP")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PORT'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3306")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t\t\t    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 端口\t")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'USER'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用户名")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PASSWORD'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tong1234"')]),t._v("\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 密码")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#替换MySQLdb模块")]),t._v("\n\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在 __init 文件中添加")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pymysql\npymysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("install_as_MySQLdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("创建表、数据")])])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Create your models here.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    username "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Publisher")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("生成迁移文件、在命令行下：")])]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[t._v("python manage.py  makemigrations  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#检测已经注册app下的models.py的变更记录")]),t._v("\npython manage.py migrate   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#数据库迁移 ")]),t._v("\n\npython3 manage.py  makemigrations  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#检测已经注册app下的models.py的变更记录")]),t._v("\npython3 manage.py migrate   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#数据库迁移 ")]),t._v("\n")])])]),a("ol",{attrs:{start:"6"}},[a("li",[t._v("表结构已经建成，在 pycharm 中右上角进入 database")]),t._v(" "),a("li",[t._v("添加 mysql源，填写数据库信息后，下载驱动（最下边的 download）")]),t._v(" "),a("li",[t._v("在database中添加数据，然后点击提交后可写入到数据库中")]),t._v(" "),a("li",[t._v("使用数据请移步 [数据操作 ORM](/Users/tong/Library/Mobile Documents/com~apple~CloudDocs/Typora/DJANGO框架/MTV 模型/数据（Model）.md)")])]),t._v(" "),a("p",[t._v("在.py文件中使用")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# QuerySet 对象列表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回多个 查不到也报错")]),t._v("\nret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取所有满足条件的对象")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);